!function(){"use strict";const t=[s(460551),s(2033415),s(3084039),s(4656903),s(5707527),s(6758151),s(7806727),s(9381639),s(10432263),s(11484935),s(12535559),s(13059847),s(14634759),s(14636807),s(14636807),s(14114567),s(14116623),s(13594383),s(13596431),s(13598479),s(13600535),s(13076247),s(13078295),s(13080351),s(12558111),s(12558111),s(12560167),s(12560167),s(12562223),s(12037935),s(12039983),s(12039991),s(13619055),s(14671775),s(15724487),s(16777215)],a=1e3/27;class i{constructor(t){this.flames=[],this.width=320,this.height=200,this.ctx=t,this.imageData=this.ctx.getImageData(0,0,this.width,this.height),this._init(),this.lastUpdate=0,this.active=!0}posAt(t,a){return a*this.width+t}setValue(t,a,i){let s=this.posAt(t,a);this.flames[s]=i}valueAt(t,a){let i=this.posAt(t,a);return this.flames[i]}_init(){this._initCanvas(),this._initFlames()}_initFlames(){for(let t=0;t<this.width;t++)for(let a=1;a<this.height;a++)this.setValue(t,a,0);for(let t=0;t<this.width;t++)this.setValue(t,0,35)}_initCanvas(){for(let t=0;t<this.imageData.data.length;t++)this.imageData.data[t]=0,t%4==3&&(this.imageData.data[t]=255)}update(){let i=performance.now();if(!(i-this.lastUpdate<a)){performance.mark("start");for(let a=0;a<this.height;a++){const i=a*this.width,s=(a+1)*this.width,e=(this.height-a)*this.width;for(let a=0;a<this.width;a++){const h=3&Math.round(3*Math.random()),n=i+a,l=this.flames[n],d=l-(1&h),r=s+(a+h-1);this.flames[r]=d;const m=4*(e+a);if(l>0){const a=t[l];this.imageData.data[m]=a.r,this.imageData.data[m+1]=a.g,this.imageData.data[m+2]=a.b,this.imageData.data[m+3]=255}else this.imageData.data[m]=0,this.imageData.data[m+1]=0,this.imageData.data[m+2]=0,this.imageData.data[m+3]=255}}this.ctx.putImageData(this.imageData,0,0),this.lastUpdate=i,performance.mark("end"),performance.measure("elapsed","start","end")}}toggle(){if(this.active)for(let t=0;t<this.width;t++)this.setValue(t,0,0);else for(let t=0;t<this.width;t++)this.setValue(t,0,35);this.active=!this.active}}function s(t){return{r:t>>16&255,g:t>>8&255,b:255&t}}let e,h;function n(){h.update(),self.requestAnimationFrame(n)}self.onmessage=function(t){if("init"===t.data.msg){let a=(e=t.data.canvas).getContext("2d");h=new i(a)}"start"===t.data.msg&&n(),"toggle"===t.data.msg&&h.toggle()}}();
//# sourceMappingURL=doom-fire-worker.js.map
